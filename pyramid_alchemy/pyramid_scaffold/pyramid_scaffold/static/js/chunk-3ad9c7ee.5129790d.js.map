{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.function.name.js","webpack:///./src/views/patient.vue?7208","webpack:///src/views/patient.vue","webpack:///./src/views/patient.vue?39ff","webpack:///./src/views/patient.vue"],"names":["dP","f","FProto","Function","prototype","nameRE","NAME","configurable","get","this","match","e","render","_vm","_h","$createElement","_c","_self","attrs","on","onModalOk","staticClass","_v","dynamicDepartmentList","tag","goToPatientEditPage","goToAddInvest","addEmptyInvest","deletePatient","inPatient","id","discharged","setInPatientDischarged","directives","name","rawName","modifiers","goToPatientsList","loading","items","fields","clickList","rows","perPage","$event","fetchData","currentPage","model","value","callback","$$v","expression","scopedSlots","_u","key","fn","ref","handleSubmit","preventDefault","onSubmit","required","errors","editedInvest","$set","_s","doctors","onDeleteInvest","onPrintInvest","staticRenderFns","message","components","ValidationProvider","ValidationObserver","created","$route","query","fetchDoctorsData","methods","console","log","data","getDepartmentIdByRoomId","result","departments","forEach","department","rooms","length","roomId","room","document","getElementsByName","checked","patientId","parseInt","departmentId","renderDepartmentList","i","item","index","event","contents","examinationDate","physicianId","$router","push","window","location","physicians","physician","text","computed","template","someAction","list","itemst","row","fio","modalRoom","component"],"mappings":"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","file":"js/chunk-3ad9c7ee.5129790d.js","sourcesContent":["var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-container',[_c('b-modal',{attrs:{\"id\":\"roomSelectModal\",\"title\":\"Выберите комнату\"},on:{\"ok\":_vm.onModalOk}},[_c('p',{staticClass:\"my-4\"},[_vm._v(\"Выберите отделение и комнату для госпитализации:\")]),_c(_vm.dynamicDepartmentList,{tag:\"component\"})],1),_c('b-row',[_c('b-col',[_c('b-row',{staticClass:\"mb-2\"},[_c('b-col',[_c('h2',{attrs:{\"for\":\"example-datepicker\"}},[_vm._v(\"Введите шаблон:\")])])],1),_c('b-row',{staticClass:\"mb-2\"},[_c('b-col',[_c('b-button',{on:{\"click\":_vm.goToPatientEditPage}},[_vm._v(\"Изменить данные\")])],1),_c('b-col',[_c('b-button',{on:{\"click\":_vm.goToAddInvest}},[_vm._v(\"Добавить исследование\")])],1),_c('b-col',[_c('b-button',{on:{\"click\":_vm.addEmptyInvest}},[_vm._v(\"Консультация (чистая)\")])],1)],1),_c('b-row',{staticClass:\"mb-2\"},[_c('b-col',[_c('b-button',{on:{\"click\":_vm.deletePatient}},[_vm._v(\"Удалить пациента\")])],1),_c('b-col',[(this.inPatient.id || (this.inPatient.discharged != null && !this.inPatient.discharged))?_c('b-button',{on:{\"click\":_vm.setInPatientDischarged}},[_vm._v(\"Выписать\")]):_c('b-button',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.roomSelectModal\",modifiers:{\"roomSelectModal\":true}}]},[_vm._v(\"Госпитализировать\")])],1),_c('b-col',[_c('b-button',{on:{\"click\":_vm.goToPatientsList}},[_vm._v(\"Список пациентов\")])],1)],1),_c('b-row',[_c('b-overlay',{attrs:{\"show\":_vm.loading,\"rounded\":\"sm\"}},[_c('b-table',{attrs:{\"id\":\"invests-table\",\"items\":_vm.items,\"fields\":_vm.fields,\"selectable\":\"\",\"select-mode\":\"single\"},on:{\"row-selected\":_vm.clickList}}),_c('b-pagination',{attrs:{\"total-rows\":_vm.rows,\"per-page\":_vm.perPage,\"aria-controls\":\"invests-table\"},on:{\"input\":function($event){return _vm.fetchData(this.id, _vm.currentPage)}},model:{value:(_vm.currentPage),callback:function ($$v) {_vm.currentPage=$$v},expression:\"currentPage\"}})],1)],1)],1),_c('b-col',[_c('ValidationObserver',{scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar handleSubmit = ref.handleSubmit;\nreturn [_c('b-form',{on:{\"submit\":function($event){$event.preventDefault();return handleSubmit(_vm.onSubmit)}}},[_c('b-row',{staticClass:\"mb-2\"},[_c('b-col',{attrs:{\"md\":\"12\"}},[_c('validation-provider',{attrs:{\"rules\":{ required: true }},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('b-form-input',{attrs:{\"placeholder\":\"Название\"},model:{value:(_vm.editedInvest.name),callback:function ($$v) {_vm.$set(_vm.editedInvest, \"name\", $$v)},expression:\"editedInvest.name\"}}),_c('span',{staticClass:\"validationError\"},[_vm._v(_vm._s(errors[0]))])]}}],null,true)})],1)],1),_c('b-row',{staticClass:\"mb-2\"},[_c('b-col',{staticClass:\"mb-2\",attrs:{\"md\":\"12\"}},[_c('label',{attrs:{\"for\":\"examinationDate-datepicker\"}},[_vm._v(\"Дата исследования:\")]),_c('validation-provider',{attrs:{\"rules\":{ required: true }},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('b-form-datepicker',{staticClass:\"mb-2\",attrs:{\"locale\":\"ru\",\"id\":\"examinationDate-datepicker\"},model:{value:(_vm.editedInvest.examinationDate),callback:function ($$v) {_vm.$set(_vm.editedInvest, \"examinationDate\", $$v)},expression:\"editedInvest.examinationDate\"}}),_c('span',{staticClass:\"validationError\"},[_vm._v(_vm._s(errors[0]))])]}}],null,true)})],1)],1),_c('b-row',{staticClass:\"mb-2\"},[_c('b-col',{staticClass:\"mb-2\",attrs:{\"md\":\"12\"}},[_c('b-form-textarea',{attrs:{\"id\":\"textarea\",\"placeholder\":\"Шаблон\",\"rows\":\"8\",\"max-rows\":\"10\"},model:{value:(_vm.editedInvest.contents),callback:function ($$v) {_vm.$set(_vm.editedInvest, \"contents\", $$v)},expression:\"editedInvest.contents\"}})],1)],1),_c('b-row',{staticClass:\"mb-2\"},[_c('b-col',{attrs:{\"md\":\"12\"}},[_c('label',[_vm._v(\"Врач:  \")]),_c('b-form-select',{attrs:{\"options\":_vm.doctors},model:{value:(_vm.editedInvest.physicianId),callback:function ($$v) {_vm.$set(_vm.editedInvest, \"physicianId\", $$v)},expression:\"editedInvest.physicianId\"}})],1)],1),_c('b-row',{staticClass:\"mb-2\"},[_c('b-col',{attrs:{\"md\":\"3\"}},[_c('b-button',{attrs:{\"type\":\"submit\"}},[_vm._v(\"Сохранить изменения\")])],1),_c('b-col',{attrs:{\"md\":\"2\"}},[_c('b-button',{on:{\"click\":_vm.onDeleteInvest}},[_vm._v(\"Удалить\")])],1),_c('b-col',{attrs:{\"md\":\"1\"}},[_c('b-button',{on:{\"click\":_vm.onPrintInvest}},[_vm._v(\"Распечатать\")])],1)],1)],1)]}}])})],1)],1)],1),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <b-container>\n      <b-modal id=\"roomSelectModal\" @ok=\"onModalOk\" title=\"Выберите комнату\">\n        <p class=\"my-4\">Выберите отделение и комнату для госпитализации:</p>\n        <component :is=\"dynamicDepartmentList\" />\n      </b-modal>\n      <b-row>\n        <b-col>\n          <b-row class=\"mb-2\">\n            <b-col>\n              <h2 for=\"example-datepicker\">Введите шаблон:</h2>\n            </b-col>\n          </b-row>\n          <b-row class=\"mb-2\">\n            <b-col>\n              <b-button v-on:click=\"goToPatientEditPage\">Изменить данные</b-button>\n            </b-col>\n            <b-col>\n              <b-button v-on:click=\"goToAddInvest\">Добавить исследование</b-button>\n            </b-col>\n            <b-col>\n              <b-button v-on:click=\"addEmptyInvest\">Консультация (чистая)</b-button>\n            </b-col>\n          </b-row>\n          <b-row class=\"mb-2\">\n            <b-col>\n              <b-button v-on:click=\"deletePatient\">Удалить пациента</b-button>\n            </b-col>\n            <b-col>\n              <b-button\n                v-if=\"this.inPatient.id || (this.inPatient.discharged != null && !this.inPatient.discharged)\"\n                v-on:click=\"setInPatientDischarged\"\n              >Выписать</b-button>\n              <b-button v-else v-b-modal.roomSelectModal>Госпитализировать</b-button>\n            </b-col>\n            <b-col>\n              <b-button v-on:click=\"goToPatientsList\">Список пациентов</b-button>\n            </b-col>\n          </b-row>\n\n          <b-row>\n            <b-overlay :show=\"loading\" rounded=\"sm\">\n              <b-table\n                id=\"invests-table\"\n                :items=\"items\"\n                :fields=\"fields\"\n                selectable\n                select-mode=\"single\"\n                @row-selected=\"clickList\"\n              ></b-table>\n              <b-pagination\n                @input=\"fetchData(this.id, currentPage)\"\n                v-model=\"currentPage\"\n                :total-rows=\"rows\"\n                :per-page=\"perPage\"\n                aria-controls=\"invests-table\"\n              ></b-pagination>\n            </b-overlay>\n          </b-row>\n        </b-col>\n        <b-col>\n          <ValidationObserver v-slot=\"{ handleSubmit }\">\n            <b-form @submit.prevent=\"handleSubmit(onSubmit)\">\n              <b-row class=\"mb-2\">\n                <b-col md=\"12\">\n                  <validation-provider :rules=\"{ required: true }\" v-slot=\"{ errors }\">\n                    <b-form-input v-model=\"editedInvest.name\" placeholder=\"Название\"></b-form-input>\n                    <span class=\"validationError\">{{ errors[0] }}</span>\n                  </validation-provider>\n                </b-col>\n              </b-row>\n              <b-row class=\"mb-2\">\n                <b-col md=\"12\" class=\"mb-2\">\n                  <label for=\"examinationDate-datepicker\">Дата исследования:</label>\n                  <validation-provider :rules=\"{ required: true }\" v-slot=\"{ errors }\">\n                    <b-form-datepicker\n                      locale=\"ru\"\n                      id=\"examinationDate-datepicker\"\n                      v-model=\"editedInvest.examinationDate\"\n                      class=\"mb-2\"\n                    ></b-form-datepicker>\n                    <span class=\"validationError\">{{ errors[0] }}</span>\n                  </validation-provider>\n                </b-col>\n              </b-row>\n              <b-row class=\"mb-2\">\n                <b-col md=\"12\" class=\"mb-2\">\n                  <b-form-textarea\n                    id=\"textarea\"\n                    v-model=\"editedInvest.contents\"\n                    placeholder=\"Шаблон\"\n                    rows=\"8\"\n                    max-rows=\"10\"\n                  ></b-form-textarea>\n                </b-col>\n              </b-row>\n              <b-row class=\"mb-2\">\n                <b-col md=\"12\">\n                  <label>Врач: &nbsp;</label>\n                  <b-form-select v-model=\"editedInvest.physicianId\" :options=\"doctors\"></b-form-select>\n                </b-col>\n              </b-row>\n              <b-row class=\"mb-2\">\n                <b-col md=\"3\">\n                  <b-button type=\"submit\">Сохранить изменения</b-button>\n                </b-col>\n                <b-col md=\"2\">\n                  <b-button v-on:click=\"onDeleteInvest\">Удалить</b-button>\n                </b-col>\n                <b-col md=\"1\">\n                  <b-button v-on:click=\"onPrintInvest\">Распечатать</b-button>\n                </b-col>\n              </b-row>\n            </b-form>\n          </ValidationObserver>\n        </b-col>\n      </b-row>\n    </b-container>\n    <router-view></router-view>\n  </div>\n</template>\n\n<script>\nimport { ValidationProvider, extend, ValidationObserver } from \"vee-validate\";\nimport { required } from \"vee-validate/dist/rules\";\nimport { PatientService } from \"@/common/api.service\";\nimport { API_URL } from \"@/common/config\";\n\nextend(\"required\", {\n  ...required,\n  message: \"Обязательное поле\"\n});\n\nexport default {\n  name: \"patient\",\n  components: {\n    ValidationProvider,\n    ValidationObserver\n  },\n  created: function() {\n    this.id = this.$route.query.id;\n    this.fetchData(this.id, 1);\n    this.fetchDoctorsData();\n  },\n  methods: {\n    deletePatient() {\n      PatientService.delete(this.id).then(data => {\n        this.goToPatientsList();\n        console.log(data);\n      });\n    },\n    setInPatientDischarged() {\n      this.inPatient.discharged = true;\n      PatientService.setInPatientDischarged(this.inPatient).then(data => {\n        this.fetchData(this.id, this.currentPage);\n        console.log(data);\n      });\n    },\n    getDepartmentIdByRoomId(roomId) {\n      var result = null;\n      this.departments.forEach(department => {\n        if (department.rooms.length > 0) {\n          department.rooms.forEach(room => {\n            if (roomId == room.id) {\n              result = department.id;\n            }\n          });\n        }\n      });\n      return result;\n    },\n    onModalOk() {\n      var rooms = document.getElementsByName(\"room\");\n      rooms.forEach(room => {\n        if (room.checked) {\n          this.modalRoom = room.value;\n          this.inPatient.discharged = true;\n\n          PatientService.addInPatient({\n            patientId: parseInt(this.id),\n            roomId: parseInt(room.value),\n            departmentId: this.getDepartmentIdByRoomId(room.value)\n          }).then(data => {\n            this.fetchData(this.id, this.currentPage);\n            console.log(data);\n          });\n        }\n      });\n    },\n    renderDepartmentList: function(departments) {\n      if (departments == null) {\n        return \"\";\n      }\n\n      var result = \"\";\n      var i = 1;\n\n      departments.forEach(department => {\n        if (department.rooms != null && department.rooms.length > 0) {\n          result += \"<a>\" + department.name + \":</a><br>\";\n          department.rooms.forEach(room => {\n            result +=\n              '<input type=\"radio\" v-model=\"modalRoom\" id=\"room' +\n              i +\n              '\" name=\"room\" value=\"' +\n              room.id +\n              '\"> <label for=\"room' +\n              i +\n              '\">' +\n              room.name +\n              \"</label><br>\";\n          });\n          result += \"<br>\";\n        }\n      });\n\n      return result;\n    },\n    fetchData(patientId, page) {\n      // this.error = this.post = null;\n      this.loading = true;\n      PatientService.getInvests(page ? page : 1, patientId).then(data => {\n        this.itemst = data.data.items;\n        this.rows = data.data.totalItems;\n        this.perPage = data.data.per_page;\n        this.loading = false.data;\n      });\n      PatientService.getDepartments().then(data => {\n        this.departments = data.data.departments;\n      });\n      PatientService.getInPatient(patientId).then(data => {\n        this.inPatient = data.data;\n      });\n    },\n    clickList(item, index, event) {\n      console.log(item + index + event);\n      this.editedInvest.id = item[0].id;\n      this.editedInvest.name = item[0].name;\n      this.editedInvest.contents = item[0].contents;\n      this.editedInvest.examinationDate = item[0].examinationDate;\n      this.editedInvest.physicianId = item[0].physicianId;\n    },\n    goToAddInvest() {\n      this.$router.push({ path: \"AddInvest\", query: { patientId: this.id } });\n    },\n    goToPatientEditPage() {\n      this.$router.push({ path: \"editPatient\", query: { id: this.id } });\n    },\n    goToPatientsList() {\n      this.$router.push(\"patients\");\n    },\n    addEmptyInvest() {\n      PatientService.addEmptyInvest(this.id).then(data => {\n        this.fetchData(this.id, this.currentPage);\n        console.log(data);\n      });\n    },\n    onPrintInvest() {\n      window.location =\n        API_URL + \"printExamination?examinationId=\" + this.editedInvest.id;\n    },\n    onSubmit() {\n      PatientService.updateInvest(this.$data.editedInvest).then(data => {\n        this.fetchData(this.id, this.currentPage);\n        console.log(data);\n      });\n    },\n    onDeleteInvest() {\n      PatientService.deleteExamination(this.editedInvest.id).then(data => {\n        this.fetchData(this.id, this.currentPage);\n        console.log(data);\n      });\n    },\n    fetchDoctorsData() {\n      PatientService.getDoctors().then(data => {\n        data.data.physicians.forEach(physician => {\n          physician.text =\n            physician.family +\n            \" \" +\n            physician.name.substring(0, 1).toUpperCase() +\n            \". \" +\n            physician.thirdName.substring(0, 1).toUpperCase() +\n            \".\";\n          physician.value = physician.id;\n\n          this.doctors.push(physician);\n        });\n      });\n    }\n  },\n  computed: {\n    dynamicDepartmentList: function() {\n      return {\n        template: `<div>${this.renderDepartmentList(this.departments)}</div>`,\n        methods: {\n          someAction() {\n            console.log(\"Action!\");\n          }\n        }\n      };\n    },\n    items() {\n      var list = [];\n      this.itemst.forEach(row => {\n        if (row.physician) {\n          row.physician.fio =\n            row.physician.family +\n            \" \" +\n            row.physician.name.substring(0, 1).toUpperCase() +\n            \". \" +\n            row.physician.thirdName.substring(0, 1).toUpperCase() +\n            \".\";\n        }\n        list.push(row);\n      });\n\n      return list;\n    }\n  },\n  data() {\n    return {\n      id: null,\n      loading: false,\n      rows: 0,\n      perPage: 20,\n      currentPage: 1,\n      departments: null,\n      modalRoom: null,\n      inPatient: null,\n      fields: [\n        { key: \"name\", label: \"Исследование\" },\n        { key: \"examinationDate\", label: \"Дата\" },\n        { key: \"physician.fio\", label: \"Врач\" }\n      ],\n      editedInvest: {\n        id: null,\n        name: null,\n        examinationDate: null,\n        contents: null,\n        physicianId: null\n      },\n      doctors: [{ value: null, text: \"Выберите врача\" }],\n      itemst: null\n    };\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./patient.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./patient.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./patient.vue?vue&type=template&id=172193b8&\"\nimport script from \"./patient.vue?vue&type=script&lang=js&\"\nexport * from \"./patient.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}