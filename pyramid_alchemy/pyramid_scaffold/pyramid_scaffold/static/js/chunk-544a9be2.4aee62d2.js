(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-544a9be2"],{"7f7f":function(t,e,n){var a=n("86cc").f,i=Function.prototype,s=/^\s*function ([^ (]*)/,o="name";o in i||n("9e1e")&&a(i,o,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(t){return""}}})},"8bd2":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-overlay",{attrs:{show:t.loading,rounded:"sm"}},[n("b-table",{attrs:{id:"invests-table",hover:"",items:t.items,fields:t.fields,selectable:"","select-mode":"single"},on:{"row-selected":function(e,n,a){return t.clickList(e,n,a)}}}),n("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage,"aria-controls":"invests-table"},on:{input:function(e){return t.fetchExaminationsData(t.currentPage)}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),n("router-view"),n("hr"),n("b-row",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[n("b-col",[n("p",[t._v("Исследование не выбрано")])])],1),n("b-row",{directives:[{name:"show",rawName:"v-show",value:{investInfoVisible:t.investInfoVisible},expression:"{investInfoVisible}"}]},[n("b-col",[n("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.handleSubmit;return[n("b-form",{on:{submit:function(e){return e.preventDefault(),a(t.onSubmit)}}},[n("b-row",{staticClass:"mb-2"},[n("b-col",{attrs:{md:"12"}},[n("validation-provider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[n("b-form-input",{attrs:{placeholder:"Название"},model:{value:t.editedInvest.name,callback:function(e){t.$set(t.editedInvest,"name",e)},expression:"editedInvest.name"}}),n("span",{staticClass:"validationError"},[t._v(t._s(a[0]))])]}}],null,!0)})],1)],1),n("b-row",{staticClass:"mb-2"},[n("b-col",{staticClass:"mb-2",attrs:{md:"12"}},[n("label",{attrs:{for:"examinationDate-datepicker"}},[t._v("Дата исследования:")]),n("validation-provider",{attrs:{rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[n("b-form-datepicker",{staticClass:"mb-2",attrs:{locale:"ru",id:"examinationDate-datepicker"},model:{value:t.editedInvest.examinationDate,callback:function(e){t.$set(t.editedInvest,"examinationDate",e)},expression:"editedInvest.examinationDate"}}),n("span",{staticClass:"validationError"},[t._v(t._s(a[0]))])]}}],null,!0)})],1)],1),n("b-row",{staticClass:"mb-2"},[n("b-col",{staticClass:"mb-2",attrs:{md:"12"}},[n("b-form-textarea",{attrs:{id:"textarea",placeholder:"Шаблон",rows:"8","max-rows":"10"},model:{value:t.editedInvest.contents,callback:function(e){t.$set(t.editedInvest,"contents",e)},expression:"editedInvest.contents"}})],1)],1),n("b-row",{staticClass:"mb-2"},[n("b-col",{attrs:{md:"12"}},[n("label",[t._v("Врач:  ")]),n("b-form-select",{attrs:{options:t.doctors},model:{value:t.editedInvest.physicianId,callback:function(e){t.$set(t.editedInvest,"physicianId",e)},expression:"editedInvest.physicianId"}})],1)],1),n("b-row",{staticClass:"mb-2"},[n("b-col",{attrs:{md:"3"}},[n("b-button",{attrs:{type:"submit"}},[t._v("Сохранить изменения")])],1),n("b-col",{attrs:{md:"2"}},[n("b-button",{on:{click:t.onDeleteInvest}},[t._v("Удалить")])],1),n("b-col",{attrs:{md:"1"}},[n("b-button",{on:{click:t.onPrintInvest}},[t._v("Распечатать")])],1)],1)],1)]}}])})],1)],1)],1)},i=[],s=(n("8e6e"),n("456d"),n("ac6a"),n("7f7f"),n("bd86")),o=n("7bb1"),r=n("4c93"),c=n("a49b"),l=n("5ce5");function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Object(o["c"])("required",u(u({},r["a"]),{},{message:"Обязательное поле"}));var b={name:"invests",components:{ValidationProvider:o["b"],ValidationObserver:o["a"]},created:function(){this.fetchExaminationsData(1),this.fetchDoctorsData()},methods:{onPrintInvest:function(){window.location=c["a"]+"printExamination?examinationId="+this.editedInvest.id},onSubmit:function(){var t=this;l["h"].post(this.$data.editedInvest).then((function(e){t.fetchExaminationsData(t.currentPage),console.log(e)}))},onDeleteInvest:function(){var t=this;l["h"].delete(this.editedInvest.id).then((function(e){t.fetchExaminationsData(t.currentPage),console.log(e)}))},clickList:function(t,e,n){console.log(t+e+n),this.editedInvest.id=t[0].id,this.editedInvest.name=t[0].name,this.editedInvest.contents=t[0].contents,this.editedInvest.examinationDate=t[0].examinationDate,this.editedInvest.physicianId=t[0].physicianId},fetchExaminationsData:function(t){var e=this;this.loading=!0,l["h"].getInvests(t||1).then((function(t){e.itemst=t.data.items,e.rows=t.data.totalItems,e.perPage=t.data.per_page,e.loading=(!1).data}))},fetchDoctorsData:function(){var t=this;l["h"].getDoctors().then((function(e){e.data.physicians.forEach((function(e){e.text=e.family+" "+e.name.substring(0,1).toUpperCase()+". "+e.thirdName.substring(0,1).toUpperCase()+".",e.value=e.id,t.doctors.push(e)}))}))}},computed:{items:function(){var t=[];return this.itemst.forEach((function(e){e.physician&&(e.physician.fio=e.physician.family+" "+e.physician.name.substring(0,1).toUpperCase()+". "+e.physician.thirdName.substring(0,1).toUpperCase()+"."),t.push(e)})),t},isInvestNotSelected:function(){return!this.investInfoVisible}},data:function(){return{loading:!1,rows:0,perPage:null,currentPage:1,investInfoVisible:!1,editedInvest:{id:null,name:null,examinationDate:null,contents:null,physicianId:null},doctors:[{value:null,text:"Выберите врача"}],fields:[{key:"patient.family",label:"Фамилия"},{key:"patient.name",label:"Имя"},{key:"patient.thirdName",label:"Отчество"},{key:"name",label:"Тип исследования"},{key:"examinationDate",label:"Дата"},{key:"physician.fio",label:"Врач"}],itemst:null}}},f=b,m=n("2877"),p=Object(m["a"])(f,a,i,!1,null,null,null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-544a9be2.4aee62d2.js.map